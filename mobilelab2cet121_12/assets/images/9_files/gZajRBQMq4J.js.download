;/*FB_PKG_DELIM*/

__d("FDSAppHorizonFilled16PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1450866"),16);b=a;g["default"]=b}),98);
__d("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTileVideoAutoPlayerWrapper_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{args:[{kind:"Literal",name:"playerSuborigin",value:"stories_video_preview"}],kind:"FragmentSpread",name:"VideoPlayerRelayWithSSR_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayTileVideoAutoPlayerWrapper.react",["CometBackgroundImage.react","CometPageletWithDiv.react","CometRelay","CometVideoPlayerLoggingConfigForFBWeb","StoriesTrayTileVideoAutoPlayerWrapper_video.graphql","VideoPlayerHooks","VideoPlayerSurface.react","VideoPlayerWithThumbnail.react","clearTimeout","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.useEffect,m=e.useRef,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerRelayWithSSR.react").__setRef("StoriesTrayTileVideoAutoPlayerWrapper.react")),p=3;function q(a){var b=d("react-compiler-runtime").c(7),e=a.coverImage,f=a.onPlaybackEnded,g=m(0),h=m(null),i=(j||(j=d("VideoPlayerHooks"))).useController(),n=j.useVideoPlayerTotalLoops(),o;b[0]!==i||b[1]!==f||b[2]!==n?(a=function(){h.current=i.getPlayheadPosition();var a=i.subscribe(function(){var a=h.current,b=i.getPlayheadPosition(),c=i.getCurrentState();if(a!=null&&b!==a&&!c.seeking){h.current=b;a=Math.min(c.duration,p);b>=a?(i.seek(0),n>-1&&g.current>=n?(i.pause("product_initiated"),i.freeze(),f()):g.current=g.current+1):b<0&&i.seek(0)}});return function(){a.remove(),h.current=null}},o=[i,f,n],b[0]=i,b[1]=f,b[2]=n,b[3]=a,b[4]=o):(a=b[3],o=b[4]);l(a,o);b[5]!==e?(a=k.jsx(c("VideoPlayerSurface.react"),{children:k.jsx(c("VideoPlayerWithThumbnail.react"),{src:e})}),b[5]=e,b[6]=a):a=b[6];return a}function a(a){var e=d("react-compiler-runtime").c(16),f=a.coverImage;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql"),a);var g=c("gkx")("8787")?500:1e3,i=m(null),j=n(g>0),p=j[0],r=j[1],s;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(){g>0&&(i.current=c("setTimeout")(function(){r(!1)},g));return function(){i.current!=null&&(c("clearTimeout")(i.current),i.current=null)}},s=[g],e[0]=j,e[1]=s):(j=e[0],s=e[1]);l(j,s);j=n(!1);s=j[0];var t=j[1];e[2]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(){t(!0)},e[2]=j):j=e[2];j=j;var u;e[3]!==f?(u=k.jsx(c("CometBackgroundImage.react"),{src:f}),e[3]=f,e[4]=u):u=e[4];var v;e[5]!==f?(v=k.jsx(c("CometBackgroundImage.react"),{src:f}),e[5]=f,e[6]=v):v=e[6];e[7]!==f||e[8]!==p||e[9]!==s||e[10]!==a?(j=p||s||a.viewer_autoplay_setting==="off"?null:k.jsx(o,{bufferEndLimit:3,bypassUseCometSizeError:!0,canAutoplay:"respect_user_settings",disableLoadingIndicator:!0,loggingConfig:d("CometVideoPlayerLoggingConfigForFBWeb").createCometVideoPlayerLoggingConfigForFBWeb({withFBWebSNAPLGK:!0}),loopCount:2,portalingEnabled:!1,silenceHydrationMutationReporting:!0,subOrigin:"stories_video_preview",video:a,volumeSetting:0,children:k.jsx(q,{coverImage:f,onPlaybackEnded:j})}),e[7]=f,e[8]=p,e[9]=s,e[10]=a,e[11]=j):j=e[11];e[12]!==u||e[13]!==v||e[14]!==j?(f=k.jsxs(d("CometPageletWithDiv.react").Placeholder,{fallback:u,name:"Stories",pageletType:"media",children:[v,j]}),e[12]=u,e[13]=v,e[14]=j,e[15]=f):f=e[15];return f}g["default"]=a}),98);